{% extends 'base.html' %}

{% block title %}{{ post.title }} - MedTalks Blog{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog-post.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog-posts.css') }}">
{% endblock %}

{% block content %}
<!-- Reading Progress Bar -->
<div class="reading-progress-container">
    <div id="reading-progress-bar" class="reading-progress-bar"></div>
</div>

<!-- Hero Section -->
<section class="blog-post-hero">
    <div class="blog-post-hero-content">
        <span class="blog-post-category-badge">{{ post.category }}</span>
        <h1 class="blog-post-hero-title">{{ post.title }}</h1>
        <div class="blog-post-hero-meta">
            <div class="blog-post-hero-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                {{ post.date }}
            </div>
            <div class="blog-post-hero-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                {{ post.reading_time }}
            </div>
            <div class="blog-post-hero-meta-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                {% if post.updatedByName %}
                {{ post.updatedByName }}
                {% elif post.author and post.author.name %}
                {{ post.author.name }}
                {% else %}
                MedTalks Team
                {% endif %}
            </div>
        </div>
    </div>
</section>

<div class="blog-post-container">
    <a href="{{ url_for('blog') }}" class="back-to-blog">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to Blog
    </a>

    <!-- Featured Image -->
    <div class="blog-post-featured-image">
        <img src="{{ post.image }}" alt="{{ post.title }}">
    </div>

    <div class="blog-post-excerpt-wrapper">
        <!-- New Expert Insight Box (Replaces old excerpt styling) -->
        {% if post.expertSection %}
        <div class="expert-insight-top-box">
            <blockquote class="author-expert-quote">
                {{ post.expertSection }}
            </blockquote>
        </div>
        {% else %}
        <!-- Fallback if no expert section, show excerpt -->
        <p class="blog-post-regular-excerpt">{{ post.excerpt }}</p>
        {% endif %}
    </div>

    <div class="blog-post-content">
        {{ post.content | safe }}

        <!-- Author Signature -->
        <div class="blog-post-signature">
            <div class="signature-content">
                <span class="signature-title">Author</span>
                <h4 class="signature-name">
                    {% if post.updatedByName %}
                    {{ post.updatedByName }}
                    {% elif post.author and post.author.name %}
                    {{ post.author.name }}
                    {% elif post.createdByName %}
                    {{ post.createdByName }}
                    {% else %}
                    MedTalks Team
                    {% endif %}
                </h4>
            </div>
            <div class="signature-avatar">
                {% if post.updatedByPhotoURL %}
                <img src="{{ post.updatedByPhotoURL }}" alt="Author">
                {% elif post.author and post.author.avatar %}
                <img src="{{ post.author.avatar }}" alt="Author">
                {% else %}
                <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=120&h=120&fit=crop" alt="Author">
                {% endif %}
            </div>
        </div>
    </div>



    <!-- Share Section -->
    <div class="blog-post-share">
        <h4>Share this article</h4>
        <div class="blog-post-share-buttons">
            <a href="https://twitter.com/intent/tweet?text={{ post.title }}" target="_blank"
                class="share-button twitter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                    </path>
                </svg>
                Twitter
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url=" target="_blank"
                class="share-button linkedin">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                    </path>
                    <circle cx="4" cy="4" r="2"></circle>
                </svg>
                LinkedIn
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank" class="share-button facebook">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
                </svg>
                Facebook
            </a>
        </div>
    </div>
</div>

<!-- Related Posts Section -->
<section class="related-posts-section">
    <div class="related-posts-container">
        <div class="related-posts-header">
            <h2>Related Articles</h2>
            <p>Continue reading more insights on medical communication</p>
        </div>

        <div class="related-posts-grid">
            <!-- Related Post 1 -->
            <article class="blog-post-card">
                <div class="blog-post-image">
                    <img src="https://images.unsplash.com/photo-1584820927498-cfe5211fd8bf?w=600&h=400&fit=crop"
                        alt="Medical Presentation">
                    <span class="blog-post-category">Career Tips</span>
                </div>
                <div class="blog-post-content">
                    <div class="blog-post-meta">
                        <span class="blog-post-date">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Jan 08, 2026
                        </span>
                        <span class="blog-post-reading-time">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            7 min read
                        </span>
                    </div>
                    <h3 class="blog-post-title">Presenting Medical Cases: A Complete Guide for International Doctors
                    </h3>
                    <p class="blog-post-excerpt">
                        Learn how to structure and deliver compelling medical case presentations in English.
                    </p>
                    <div class="blog-post-footer">
                        <div class="blog-post-author">
                            <div class="blog-post-author-avatar">
                                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"
                                    alt="Dr. James Thompson">
                            </div>
                            <span class="blog-post-author-name">Dr. James Thompson</span>
                        </div>
                        <a href="{{ url_for('blog_post', slug='presenting-medical-cases') }}"
                            class="blog-post-read-more">
                            Read More
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                <polyline points="12 5 19 12 12 19"></polyline>
                            </svg>
                        </a>
                    </div>
                </div>
            </article>

            <!-- Related Post 2 -->
            <article class="blog-post-card">
                <div class="blog-post-image">
                    <img src="https://images.unsplash.com/photo-1551076805-e1869033e561?w=600&h=400&fit=crop"
                        alt="Medical Communication">
                    <span class="blog-post-category">Communication</span>
                </div>
                <div class="blog-post-content">
                    <div class="blog-post-meta">
                        <span class="blog-post-date">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Jan 05, 2026
                        </span>
                        <span class="blog-post-reading-time">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            6 min read
                        </span>
                    </div>
                    <h3 class="blog-post-title">10 Common Medical English Mistakes (And How to Avoid Them)</h3>
                    <p class="blog-post-excerpt">
                        Even experienced healthcare professionals make these errors. Learn practical strategies to speak
                        with accuracy.
                    </p>
                    <div class="blog-post-footer">
                        <div class="blog-post-author">
                            <div class="blog-post-author-avatar">
                                <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=100&h=100&fit=crop"
                                    alt="Dr. Emily Chen">
                            </div>
                            <span class="blog-post-author-name">Dr. Emily Chen</span>
                        </div>
                        <a href="#" class="blog-post-read-more">
                            Read More
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                <polyline points="12 5 19 12 12 19"></polyline>
                            </svg>
                        </a>
                    </div>
                </div>
            </article>

            <!-- Related Post 3 -->
            <article class="blog-post-card">
                <div class="blog-post-image">
                    <img src="https://images.unsplash.com/photo-1579684385127-1ef15d508118?w=600&h=400&fit=crop"
                        alt="Medical Team">
                    <span class="blog-post-category">Teamwork</span>
                </div>
                <div class="blog-post-content">
                    <div class="blog-post-meta">
                        <span class="blog-post-date">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Dec 28, 2025
                        </span>
                        <span class="blog-post-reading-time">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            4 min read
                        </span>
                    </div>
                    <h3 class="blog-post-title">Effective Handover Communication: The SBAR Framework Explained</h3>
                    <p class="blog-post-excerpt">
                        Master the SBAR communication framework to deliver clear, structured handovers.
                    </p>
                    <div class="blog-post-footer">
                        <div class="blog-post-author">
                            <div class="blog-post-author-avatar">
                                <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=100&h=100&fit=crop"
                                    alt="Dr. Michael Roberts">
                            </div>
                            <span class="blog-post-author-name">Dr. Michael Roberts</span>
                        </div>
                        <a href="#" class="blog-post-read-more">
                            Read More
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                <polyline points="12 5 19 12 12 19"></polyline>
                            </svg>
                        </a>
                    </div>
                </div>
            </article>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Scroll Progress Bar
        const progressBar = document.getElementById('reading-progress-bar');

        window.onscroll = function () {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            progressBar.style.width = scrolled + "%";
        };
    });
</script>
{% endblock %}